(this["webpackJsonpgateway-app"]=this["webpackJsonpgateway-app"]||[]).push([[0],{12:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n(1),c=n.n(i),a=n(23),o=n.n(a),r=(n(37),n(38),n(51)),d=(n(12),function(){var e=Object(r.a)();e.t,e.i18n;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("h1",{children:"Things"})})}),l=n(27),j=n(28),u=n(31),h=n(30),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(s.jsx)("h1",{children:"rules"})}}]),n}(c.a.Component),m=n(4),g=function(){var e=Object(r.a)(),t=e.t;e.i18n;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("nav",{id:"settings-menu",className:"settings-section",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"domain-settings-link",to:"/settings/domain",children:t("Domain")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"network-settings-link",to:"/settings/network",children:t("Network")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"user-settings-link",to:"/settings/users",children:t("Users")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"addon-settings-link",to:"/settings/addons",children:t("Addons")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"localization-settings-link",to:"/settings/localization",children:t("Localization")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"update-settings-link",to:"/settings/updates",children:t("Updates")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"authorization-settings-link",to:"/settings/authorizations",children:t("Authorizations")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"experiment-settings-link",to:"/settings/experiments",children:t("Experiments")})}),Object(s.jsx)("li",{className:"settings-item",children:Object(s.jsx)(m.b,{id:"developer-settings-link",to:"/settings/developer",children:t("Developer")})})]})})})},O=n(8),x=(n(49),function(e){var t=Object(r.a)(),n=t.t;t.i18n;var a=Object(i.useState)({menuBtnShow:!0,menuListShow:!1,menuScrimShow:!1}),o=Object(O.a)(a,2),d=o[0],l=o[1];function j(){l({menuBtnShow:d.menuBtnShow,menuListShow:!1,menuScrimShow:!1})}return Object(s.jsxs)(c.a.Fragment,{children:[Object(s.jsx)("div",{id:"menu-scrim",onClick:j,className:d.menuScrimShow?"":"hidden"}),Object(s.jsx)("button",{onClick:function(){l({menuBtnShow:d.menuBtnShow,menuListShow:!d.menuListShow,menuScrimShow:!d.menuScrimShow})},id:"menu-button",className:d.menuBtnShow?"icon-button":"icon-button hidden"}),Object(s.jsx)("nav",{id:"main-menu",className:d.menuScrimShow?"":"hidden",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsxs)(m.c,{onClick:function(){j()},id:"things-menu-item",to:"/things",activeClassName:"selected",children:[n("Things")," "]})}),Object(s.jsx)("li",{children:Object(s.jsx)(m.c,{onClick:function(){j()},id:"rules-menu-item",to:"/rules",activeClassName:"selected",children:n("Rules")})}),Object(s.jsx)("li",{children:Object(s.jsx)(m.c,{onClick:function(){j()},id:"settings-menu-item",to:"/settings",activeClassName:"selected",children:n("Settings")})})]})})]})}),p=n(2),f=n(9),v=function(e){var t=Object(r.a)(),n=t.t;t.i18n;return Object(s.jsxs)("li",{className:"addon-item",children:[Object(s.jsxs)("div",{className:"addon-settings-header adapter",children:[Object(s.jsx)("span",{className:"addon-settings-name",children:e.name}),Object(s.jsx)("span",{className:"addon-settings-version",children:e.version}),Object(s.jsx)("span",{className:"addon-settings-description",children:e.description}),Object(s.jsxs)("span",{className:"addon-settings-author",children:[n("author"),Object(s.jsx)("a",{href:e.homepage_url,target:"_blank",rel:"noopener",children:e.author})]}),Object(s.jsxs)("span",{className:"addon-settings-license","data-license-href":e.license,children:["(",n("license"),")"]})]}),Object(s.jsxs)("div",{className:"addon-settings-controls",children:[Object(s.jsx)("button",{className:"text-button addon-settings-config ",children:n("configure")}),e.isUpdate&&Object(s.jsx)("button",{className:"text-button addon-settings-update",children:n("update")}),Object(s.jsx)("span",{className:"addon-settings-spacer"}),Object(s.jsx)("button",{className:"text-button addon-settings-remove",children:n("remove")}),Object(s.jsx)("button",{className:e.enabled?"text-button addon-settings-disable":"text-button addon-settings-enable",children:e.enabled?n("disable"):n("enable")})]})]})},N={getJson:function(e){return fetch(e,{method:"GET"}).then((function(t){if(console.log("fetch getJson api:",e),!t.ok)throw new Error(t.status);return t.json()}))},getAddonsInfo:function(){return this.getJson("/settings/addons_info")},getInstalledAddons:function(){return this.getJson("/addons")}},S=function(){var e=Object(i.useState)(new Map),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(new Map),o=Object(O.a)(a,2),r=o[0],d=o[1],l=Object(i.useState)(),j=Object(O.a)(l,2);j[0],j[1];Object(i.useEffect)((function(){console.log("begin fetch the installed addon list"),N.getInstalledAddons().then((function(e){if(e){var t,n=new Map,s=Object(f.a)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;try{n.set(i.id,i)}catch(a){console.error("Failed to parse add-on settings: ".concat(a))}}}catch(a){s.e(a)}finally{s.f()}c(n)}})).catch((function(e){console.log("fetch the installed addon list err:",e)})),function(){var e=this;N.getAddonsInfo().then((function(e){if(e&&e.urls&&e.architecture&&e.version&&e.node_version){console.log(e,"data.....");var t=new URLSearchParams;t.set("arch",e.architecture),t.set("version",e.version),t.set("node",e.node_version),t.set("python",e.python_version);var n,s=[],i=Object(f.a)(e.urls);try{for(i.s();!(n=i.n()).done;){var c=n.value;console.log(c),s.push(fetch("".concat(c,"?").concat(t.toString()),{method:"GET",headers:{Accept:"application/json"}}))}}catch(a){i.e(a)}finally{i.f()}return Promise.all(s)}})).then((function(e){console.log(e);var t,n=[],s=Object(f.a)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;n.push(i.json())}}catch(c){s.e(c)}finally{s.f()}return Promise.all(n)})).then((function(t){var s,i=r,c=Object(f.a)(t);try{for(c.s();!(s=c.n()).done;){var a,o=s.value,l=Object(f.a)(o);try{for(l.s();!(a=l.n()).done;){var j=a.value,u={id:j.id,name:j.name,description:j.description,author:j.author,homepage_url:j.homepage_url,license_url:j.license,version:j.version,url:j.url,checksum:j.checksum,primary_type:j.primary_type,installed:n.has(j.id)};i.has(j.id)&&e.compareSemver(i.get(j.id).version,u.version)>=0||i.set(j.id,u)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){c.e(h)}finally{c.f()}d(i)}))}()}),[]);var u=Object(i.useState)(!1),h=Object(O.a)(u,2),b=h[0],g=h[1];return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("section",{id:"addon-settings",className:"settings-section",children:[Object(s.jsxs)("section",{id:"addon-main-settings",className:b?"settings-subsection hidden":"settings-subsection",children:[Object(s.jsx)("button",{id:"discover-addons-button",onClick:function(){return g(!0)},className:"icon-button right-top-button"}),Object(s.jsx)(m.b,{to:"/settings",children:Object(s.jsx)("button",{id:"back-button",className:"icon-button"})}),Object(s.jsxs)("ul",{id:"installed-addons-list",children:[n&&function(e){var t,n=[],i=Object(f.a)(e);try{for(i.s();!(t=i.n()).done;){var c=Object(O.a)(t.value,2),a=c[0],o=c[1],r=Object(s.jsx)(v,{name:o.name,author:o.author,description:o.description,homepage_url:o.homepage_url,license:o.license_url,version:o.version,primary_type:o.primary_type,exec:o.exec,enabled:o.enabled,updata:!1,schema:o.schema,isUpdate:o.isUpdate},a);n.push(r)}}catch(d){i.e(d)}finally{i.f()}return n}(n),";"]})]}),Object(s.jsxs)("section",{id:"addon-discovery-settings",className:b?"settings-subsection":"settings-subsection hidden",children:[Object(s.jsx)("button",{onClick:function(){return g(!1)},id:"back-button",className:"icon-button"}),Object(s.jsxs)("div",{id:"addon-discovery-container",className:"",children:[Object(s.jsx)("input",{id:"discovered-addons-search",className:"hidden"}),Object(s.jsxs)("ul",{id:"discovered-addons-list",children:[r&&void 0,";"]})]})]})]})})};var k=function(){return Object(s.jsx)(m.a,{children:Object(s.jsxs)(p.c,{children:[Object(s.jsxs)(p.a,{path:"/things",children:[Object(s.jsx)(x,{}),Object(s.jsx)(d,{})]}),Object(s.jsxs)(p.a,{path:"/rules",children:[Object(s.jsx)(x,{}),Object(s.jsx)(b,{})]}),Object(s.jsxs)(p.a,{exact:!0,path:"/settings",children:[Object(s.jsx)(x,{}),Object(s.jsx)(g,{})]}),Object(s.jsx)(p.a,{path:"/settings/addons",children:Object(s.jsx)(S,{})}),Object(s.jsxs)(p.a,{path:"/",children:[Object(s.jsx)(x,{}),Object(s.jsx)(d,{})]})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),i(e),c(e),a(e)}))},y=n(21),_=n(14);y.a.use(_.e).init({resources:{en:{translation:{Things:"Things",Rules:"Rules",Settings:"Settings",Domain:"Domain",Network:"Network",Users:"Users",Addons:"Addons",Localization:"Localization",Updates:"Updates",Authorizations:"Authorizations",Experiments:"Experiments",Developer:"Developer",author:"by",license:"license",configure:"configure",update:"update",remove:"remove",disable:"disable",enable:"enable",add:"Add"}},zh_CN:{translation:{Things:"\u8bbe\u5907",Rules:"\u89c4\u5219",Settings:"\u8bbe\u7f6e",Domain:"\u533a\u57df",Network:"\u7f51\u7edc",Users:"\u7528\u6237",Addons:"\u9644\u52a0\u7ec4\u4ef6",Localization:"\u672c\u5730\u5316",Updates:"\u66f4\u65b0",Authorizations:"\u6388\u6743",Experiments:"\u5b9e\u9a8c",Developer:"\u5f00\u53d1\u8005",author:"\u4f5c\u8005:",license:"(\u8bb8\u53ef\u534f\u8bae)",configure:"\u914d\u7f6e",update:"\u66f4\u65b0",remove:"\u79fb\u9664",disable:"\u7981\u7528",enable:"\u542f\u7528",add:"\u6dfb\u52a0"}}},lng:"zh_CN",keySeparator:!1,interpolation:{escapeValue:!1}});y.a;o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(k,{})}),document.getElementById("root")),w()}},[[50,1,2]]]);
//# sourceMappingURL=main.bb10f89b.chunk.js.map