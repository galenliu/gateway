[{"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\index.tsx":"1","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\reportWebVitals.ts":"2","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\App.tsx":"3","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\i18n.tsx":"4","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\thing-add.js":"5","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\rules.tsx":"6","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\settings.tsx":"7","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\menu.tsx":"8","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\home.jsx":"9","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\addons.jsx":"10","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\use-things.js":"11","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\thing.js":"12","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\new-thing.jsx":"13","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\adapter.tsx":"14","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\addon.tsx":"15","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\api\\index.js":"16","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\util.js":"17","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\capability\\light.js":"18","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\property\\on-off.js":"19","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\property\\brightness.js":"20","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\index.tsx":"21","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\reportWebVitals.ts":"22","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\i18n.tsx":"23","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\App.tsx":"24","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\thing-add.js":"25","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\rules.tsx":"26","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\settings.tsx":"27","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\menu.tsx":"28","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\addons.jsx":"29","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\home.jsx":"30","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\use-things.js":"31","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\thing.js":"32","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\new-thing.jsx":"33","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\addon.tsx":"34","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\adapter.tsx":"35","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\api\\index.js":"36","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\util.js":"37","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\capability\\light.js":"38","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\property\\on-off.js":"39","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\property\\brightness.js":"40"},{"size":526,"mtime":1607410524426,"results":"41","hashOfConfig":"42"},{"size":463,"mtime":1607410524523,"results":"43","hashOfConfig":"42"},{"size":1261,"mtime":1610833811902,"results":"44","hashOfConfig":"42"},{"size":677,"mtime":1607410524506,"results":"45","hashOfConfig":"42"},{"size":3451,"mtime":1610929494902,"results":"46","hashOfConfig":"42"},{"size":146,"mtime":1607410485226,"results":"47","hashOfConfig":"42"},{"size":2280,"mtime":1610566107839,"results":"48","hashOfConfig":"42"},{"size":2445,"mtime":1607410524447,"results":"49","hashOfConfig":"42"},{"size":3784,"mtime":1611113887857,"results":"50","hashOfConfig":"42"},{"size":8490,"mtime":1610282014421,"results":"51","hashOfConfig":"42"},{"size":737,"mtime":1610925833986,"results":"52","hashOfConfig":"42"},{"size":1492,"mtime":1611084514089,"results":"53","hashOfConfig":"42"},{"size":2446,"mtime":1610923940715,"results":"54","hashOfConfig":"42"},{"size":1815,"mtime":1607489738768,"results":"55","hashOfConfig":"42"},{"size":1656,"mtime":1607489738783,"results":"56","hashOfConfig":"42"},{"size":2677,"mtime":1610835888378,"results":"57","hashOfConfig":"42"},{"size":3092,"mtime":1610283138761,"results":"58","hashOfConfig":"42"},{"size":2249,"mtime":1611084466076,"results":"59","hashOfConfig":"42"},{"size":903,"mtime":1610934631246,"results":"60","hashOfConfig":"42"},{"size":1001,"mtime":1610934631243,"results":"61","hashOfConfig":"42"},{"size":526,"mtime":1607410524426,"results":"62","hashOfConfig":"63"},{"size":463,"mtime":1607410524523,"results":"64","hashOfConfig":"63"},{"size":677,"mtime":1607410524506,"results":"65","hashOfConfig":"63"},{"size":1261,"mtime":1610833811902,"results":"66","hashOfConfig":"63"},{"size":4854,"mtime":1611564421398,"results":"67","hashOfConfig":"63"},{"size":146,"mtime":1607410485226,"results":"68","hashOfConfig":"63"},{"size":2280,"mtime":1610566107839,"results":"69","hashOfConfig":"63"},{"size":2445,"mtime":1607410524447,"results":"70","hashOfConfig":"63"},{"size":8490,"mtime":1610282014421,"results":"71","hashOfConfig":"63"},{"size":3882,"mtime":1611580292048,"results":"72","hashOfConfig":"63"},{"size":747,"mtime":1611562265247,"results":"73","hashOfConfig":"63"},{"size":1539,"mtime":1611580058467,"results":"74","hashOfConfig":"63"},{"size":2614,"mtime":1611580018944,"results":"75","hashOfConfig":"63"},{"size":1656,"mtime":1607489738783,"results":"76","hashOfConfig":"63"},{"size":1815,"mtime":1607489738768,"results":"77","hashOfConfig":"63"},{"size":2677,"mtime":1610835888378,"results":"78","hashOfConfig":"63"},{"size":3092,"mtime":1610283138761,"results":"79","hashOfConfig":"63"},{"size":2249,"mtime":1611084466076,"results":"80","hashOfConfig":"63"},{"size":903,"mtime":1610934631246,"results":"81","hashOfConfig":"63"},{"size":1001,"mtime":1610934631243,"results":"82","hashOfConfig":"63"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},"345a3r",{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"95"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"85"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"85"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"95"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"95"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"95"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"95"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"118","usedDeprecatedRules":"95"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"85"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"85"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"95"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"95"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"95"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},"1g13zcf",{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"149","usedDeprecatedRules":"150"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"140"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"140"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"150"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"161","messages":"162","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"163","usedDeprecatedRules":"150"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"166","messages":"167","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"168","messages":"169","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"140"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"140"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"150"},{"filePath":"174","messages":"175","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"150"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"150"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"150"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"150"},"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\index.tsx",[],["182","183"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\reportWebVitals.ts",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\App.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\i18n.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\thing-add.js",["184","185","186"],"import React, {useEffect, useState} from \"react\";\nimport \"../css/things.css\";\nimport API from \"../api\";\nimport NewThing from \"../components/new-thing\";\nimport {Link} from \"react-router-dom\";\nimport Container from '@material-ui/core/Container';\nimport {makeStyles} from \"@material-ui/core/styles\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    paper: {\n        padding: theme.spacing(2),\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n    },\n}));\n\n\nexport default function ThingsAdd() {\n\n    const classes = useStyles();\n\n    const [availableThings, setAvailableThings] = useState({})\n\n    useEffect(\n        () => {\n            requestPairing()\n            return cancelPairing\n        }, []\n    )\n\n\n    function requestPairing() {\n        let proto = 'ws:';\n        if (window.location.protocol === 'https:') {\n            proto = 'wss:';\n        }\n        let host = window.location.host\n        const path = `ws://localhost:9090/new_things`;\n        let socket = new WebSocket(path)\n        socket.onmessage = (e) => {\n            console.log(e.data)\n            try {\n                const thingObj = JSON.parse(e.data)\n                if (thingObj !== null) {\n                    const things = availableThings\n                    if (!availableThings.hasOwnProperty(thingObj.id)) {\n                        things[thingObj.id] = thingObj\n                        setAvailableThings({...things})\n                        console.log(\"availableThings:\", availableThings)\n                    }\n                }\n\n            } catch (e) {\n                console.log(e)\n            }\n        }\n        socket.onerror = (err) => {\n            console.log(\"websocket err:\", err)\n        }\n\n        API.startPairing(5000).then((json) => {\n            console.log(\"action:\", json)\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n    function cancelPairing() {\n        API.cancelPairing().then((json) => {\n            console.log(\"action:\", json)\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n    function saveRequest(id, option) {\n        if (availableThings.hasOwnProperty(id)) {\n            let saveThing = {...availableThings[id], ...option}\n            console.log(saveThing)\n            API.addThing(saveThing).catch(e => {\n                console.log(e)\n            })\n\n        }\n    }\n\n    function RenderAvailableThings() {\n        let list = []\n        for (let thingId in availableThings) {\n            if (availableThings.hasOwnProperty(thingId)) {\n                let thing = availableThings[thingId]\n                const newThing = <NewThing key={thing.id}\n                                           id={thing.id}\n                                           type={thing[\"@type\"]}\n                                           title={thing.title}\n                                           onSave={saveRequest}\n                />\n                list.push(newThing)\n            }\n        }\n        return list\n    }\n\n\n    return (\n        <>\n            <Link to=\"/things\">\n                <button id=\"back-button\" className=\"icon-button\"/>\n            </Link>\n            <div id=\"thing-add-view\" className={classes.root}>\n                <Container className=\"thing-add-view-container\" maxWidth=\"sm\">\n                    {RenderAvailableThings()}\n                </Container>\n            </div>\n        </>\n    )\n}\n\n\n\n",["187","188"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\rules.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\settings.tsx",["189"],"import React from 'react'\nimport {Trans, useTranslation} from \"react-i18next\";\nimport {Link} from \"react-router-dom\";\nimport \"../css/settings.css\";\n\n\nconst Settings: React.FC = () => {\n\n    return (\n        <>\n            <nav id=\"settings-menu\" className=\"settings-section\">\n\n                <ul>\n                    <li className=\"settings-item\"><Link id=\"domain-settings-link\"\n                                                        to=\"/settings/domain\"><Trans>Domain</Trans></Link></li>\n                    <li className=\"settings-item\"><Link id=\"network-settings-link\"\n                                                        to=\"/settings/network\"><Trans>Network</Trans></Link></li>\n                    <li className=\"settings-item\"><Link id=\"user-settings-link\"\n                                                        to=\"/settings/users\"><Trans>Users</Trans></Link>\n                    </li>\n                    <li className=\"settings-item\"><Link id=\"addon-settings-link\"\n                                                        to=\"/settings/addons\"><Trans>Addons</Trans></Link></li>\n\n                    <li className=\"settings-item\"><Link id=\"localization-settings-link\"\n                                                        to=\"/settings/localization\"><Trans>Localization</Trans></Link>\n                    </li>\n                    <li className=\"settings-item\"><Link id=\"update-settings-link\"\n                                                        to=\"/settings/updates\"><Trans>Updates</Trans></Link></li>\n                    <li className=\"settings-item\"><Link id=\"authorization-settings-link\"\n                                                        to=\"/settings/authorizations\"><Trans>Authorizations</Trans></Link>\n                    </li>\n                    <li className=\"settings-item\"><Link id=\"experiment-settings-link\"\n                                                        to=\"/settings/experiments\"><Trans>Experiments</Trans></Link>\n                    </li>\n                    <li className=\"settings-item\"><Link id=\"developer-settings-link\"\n                                                        to=\"/settings/developer\"><Trans>Developer</Trans></Link></li>\n                </ul>\n            </nav>\n        </>\n    );\n}\n\nexport default Settings\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\menu.tsx",["190"],"import React, {useState} from \"react\";\nimport \"../css/menu.css\"\nimport {Trans} from 'react-i18next';\nimport {NavLink} from 'react-router-dom'\n\n\ninterface IStataController {\n    menuBtnShow: boolean,\n    menuListShow: boolean,\n    menuScrimShow: boolean,\n}\n\nconst Menu: React.FC = props => {\n\n\n    function initState(): IStataController {\n        return {\n            menuBtnShow: true,\n            menuListShow: false,\n            menuScrimShow: false,\n        }\n    }\n\n    const [state, setState] = useState<IStataController>(initState());\n\n\n    function hidden() {\n        setState({\n            menuBtnShow: state.menuBtnShow,\n            menuListShow: false,\n            menuScrimShow: false,\n        })\n\n    }\n\n    function toggleMenu() {\n        setState({\n            menuBtnShow: state.menuBtnShow,\n            menuListShow: !state.menuListShow,\n            menuScrimShow: !state.menuScrimShow,\n        })\n    }\n\n    const MenuHidden = () => {\n        setState({\n            menuBtnShow: false,\n            menuListShow: state.menuListShow,\n            menuScrimShow: state.menuScrimShow,\n        })\n    }\n\n    return (\n        <React.Fragment>\n            <div id=\"menu-scrim\" onClick={hidden} className={state.menuScrimShow ? \"\" : \"hidden\"}/>\n            <button onClick={toggleMenu} id=\"menu-button\"\n                    className={state.menuBtnShow ? \"icon-button\" : \"icon-button hidden\"}/>\n            <nav id=\"main-menu\" className={state.menuScrimShow ? \"\" : \"hidden\"}>\n                <ul>\n                    <li>\n                        <NavLink onClick={() => {\n                            hidden()\n                        }} id=\"things-menu-item\" to=\"/things\" activeClassName=\"selected\">\n                            <Trans>Things</Trans></NavLink>\n                    </li>\n                    <li>\n                        <NavLink onClick={() => {\n                            hidden()\n                        }} id=\"rules-menu-item\" to=\"/rules\" activeClassName=\"selected\"><Trans>Rules</Trans></NavLink>\n                    </li>\n                    <li>\n                        <NavLink onClick={() => {\n                            hidden()\n                        }} id=\"settings-menu-item\" to=\"/settings\"\n                                 activeClassName=\"selected\"><Trans>Settings</Trans></NavLink>\n                    </li>\n                </ul>\n            </nav>\n        </React.Fragment>\n    )\n};\n\n\nexport default Menu;\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\home.jsx",["191","192","193","194"],"import React, {useCallback, useEffect, useReducer, useRef, useState} from \"react\";\nimport \"../css/things.css\";\nimport API from \"../api\";\nimport \"../components/new-thing\"\nimport {makeStyles} from '@material-ui/core/styles';\nimport {Link} from \"react-router-dom\";\nimport useWebSocket, {ReadyState} from \"react-use-websocket\";\nimport thingsReducer from \"../components/use-things\";\nimport Thing from \"../components/thing\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {spacing} from \"@material-ui/system\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    paper: {\n        padding: theme.spacing(4),\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n    },\n}));\n\nexport const ThingContext = React.createContext()\n\n\nexport default function Home() {\n\n    const [thingsState, thingsDispatch] = useReducer(thingsReducer, [])\n\n    const [socketUrl, setSocketUrl] = useState(\"ws://localhost:9090/things/\");\n    const didUnmount = useRef(false);\n    const classes = useStyles();\n\n    const {\n        sendMessage,\n        lastMessage,\n        readyState,\n    } = useWebSocket(socketUrl,\n        {\n            shouldReconnect: (closeEvent) => {\n                /*\n                  useWebSocket will handle unmounting for you, but this is an example of a\n                  case in which you would not want it to automatically reconnect\n                */\n                return didUnmount.current === false;\n            },\n            reconnectAttempts: 10,\n            reconnectInterval: 3000,\n        }\n    );\n\n    const connectionStatus = {\n        [ReadyState.CONNECTING]: 'Connecting',\n        [ReadyState.OPEN]: 'Open',\n        [ReadyState.CLOSING]: 'Closing',\n        [ReadyState.CLOSED]: 'Closed',\n        [ReadyState.UNINSTANTIATED]: 'Uninstantiated',\n    }[readyState];\n\n    const handleSendMessage = useCallback((data) =>\n            sendMessage(JSON.stringify(data)),\n        []);\n\n\n    useEffect(() => {\n            API.getThings().then((getThings) => {\n                if (getThings === null) {\n                    return\n                }\n                console.log(\"getThings:\", getThings)\n\n                getThings.forEach(thing => {\n                    thingsDispatch({messageType: \"addThing\", thing: thing})\n                })\n            }).catch(e => {\n                console.log(\"GET /things err:\", e)\n            })\n            return () => {\n                didUnmount.current = true;\n            };\n        }, []\n    )\n\n    useEffect(() => {\n            if (lastMessage !== null) {\n                console.log(\"lastMessage:\",lastMessage)\n                if (lastMessage.data) {\n                    let message = JSON.parse(lastMessage.data)\n                    if (message.messageType === \"propertyStatus\" && message.hasOwnProperty(\"id\") && message.hasOwnProperty(\"data\")) {\n\n                    }\n                }\n            }\n        }, [lastMessage]\n    )\n\n\n    function RenderThings() {\n        let list = []\n        for (let item of thingsState) {\n            const thing =\n                <Thing key={item.id} thing={item}/>\n            list.push(thing)\n        }\n        return list\n    }\n\n\n    return (\n        <>\n            {/*{addonThingShow && <ul id=\"new-things\"> {RenderAvailableThings()}</ul>}*/}\n            <Link to=\"/things/add\">\n                <button id=\"discover-addons-button\"\n                        className=\"icon-button right-top-button\"/>\n            </Link>\n            <ThingContext.Provider value={{handleSendMessage}}>\n                <div id=\"things-view\" className={classes.root}>\n                    <Grid container spacing={1}>\n                        {RenderThings()}\n                    </Grid></div>\n            </ThingContext.Provider>\n        </>\n    )\n};\n\n\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\views\\addons.jsx",["195","196","197"],"import React, {useEffect, useState} from \"react\";\nimport \"../css/settings.css\"\nimport Adapter from \"../components/adapter\";\nimport {Link} from \"react-router-dom\";\nimport Addon from \"../components/addon\";\nimport API from \"../api\"\n\n\n// Adapter like this\n//------------\n// author: \"Tim Hellhake\"\n// description: \"Runs for the specified number of seconds\"\n// enabled: true\n// exec: \"{nodeLoader} {path}\"\n// homepage_url: \"https://github.com/tim-hellhake/timer-adapter#readme\"\n// id: \"timer-adapter\"\n// name: \"Timer\"\n// primary_type: \"adapter\"\n// version: \"1.6.1\"\n//----------------\n\n\n// Addon like this\n//------------\n// \"id\": \"yo-notifier\",\n// \"name\": \"Yo\",\n// \"description\": \"Send a Yo to your phone (gateway >= 0.9.0 only)\",\n// \"author\": \"Tim Hellhake\",\n// \"homepage_url\": \"https://github.com/tim-hellhake/yo-notifier#readme\",\n// \"license_url\": \"https://raw.githubusercontent.com/tim-hellhake/yo-notifier/master/LICENSE\",\n// \"version\": \"0.1.4\",\n//\"url\": \"https://github.com/tim-hellhake/yo-notifier/releases/download/0.1.4/yo-notifier-0.1.4.tgz\",\n// \"checksum\": \"83fb9753956b6e786137d294d801b4589971a53b5c6f04618bd3855ddeea5862\",\n// \"primary_type\": \"notifier\"\n//------------\n\n\nconst Addons = () => {\n\n    const [installedAddons, setInstalledAddons] = useState(new Map())\n    const [availableAddons, setAvailableAddons] = useState(new Map())\n\n\n    //获取到的gateway已安装的addons\n    const [currentAddonsList, setCurrentAddonList] = useState()\n\n    function fetchInstalledAddonsList() {\n        console.log(\"begin fetch the installed addon list\")\n        API.getInstalledAddons().then(body => {\n            if (!body) {\n                return;\n            }\n            let installedList = new Map()\n            for (const s of body) {\n                try {\n                    installedList.set(s.id, s)\n                } catch (err) {\n                    console.error(`Failed to parse add-on settings: ${err}`);\n                }\n            }\n            setInstalledAddons(installedList)\n        }).catch((err) => {\n            console.log(\"fetch the installed addon list err:\", err)\n        })\n    }\n\n    function fetchAvailableAddonList() {\n        API.getAddonsInfo().then((data) => {\n            if (!data || !data.urls || !data.architecture || !data.version) {\n                console.log(data.urls)\n                return;\n            }\n\n            const params = new URLSearchParams();\n            params.set('arch', data.architecture);\n            params.set('version', data.version);\n            params.set('node', data.node_version);\n            params.set('python', data.python_version);\n            const promises = [];\n            for (const url of data.urls) {\n                console.log(url)\n                promises.push(fetch(`${url}?${params.toString()}`, {\n                    method: 'GET',\n                    cache: 'reload',\n                    headers: {\n                        Accept: 'application/json',\n                    },\n                }));\n            }\n            console.log(promises, \"promises.....\")\n            return Promise.all(promises)\n        }).then(\n            (responses) => {\n                const promises = []\n                for (const resp of responses) {\n                    promises.push(resp.json())\n                }\n                return Promise.all(promises)\n            }).then((bodies) => {\n                let availableList = availableAddons\n                for (const body of bodies) {\n                    for (const addon of body) {\n                        const entry = {\n                            id: addon.id,\n                            name: addon.name,\n                            description: addon.description,\n                            author: addon.author,\n                            homepage_url: addon.homepage,\n                            license_url: addon.license_url,\n                            version: addon.version,\n                            url: addon.url,\n                            checksum: addon.checksum,\n                            primary_type: addon.primary_type,\n                            installed: installedAddons.has(addon.id)\n                        }\n                        if (availableList.has(addon.id) &&\n                            this.compareSemver(availableList.get(addon.id).version,\n                                entry.version) >= 0) {\n                            continue;\n                        }\n                        availableList.set(addon.id, entry)\n\n                    }\n                }\n                setAvailableAddons(availableList);\n                console.log(\"availableList:\", availableList)\n            }\n        ).catch((err) => {\n            console.error(err)\n        })\n    }\n\n    function installAddon(id, url, checksum) {\n        API.installAddon(id, url, checksum).catch((err) => {\n            console.error(\"install addon fail err\", err)\n        })\n    }\n\n    function renderInstalledAddonsList(adapterList) {\n        const list = []\n        for (const [id, adapter] of adapterList) {\n            const addon = <Adapter key={id}\n                                   name={adapter.name}\n                                   author={adapter.author}\n                                   description={adapter.description}\n                                   homepage_url={adapter.homepage_url}\n                                   license={adapter.license_url}\n                                   version={adapter.version}\n                                   primary_type={adapter.primary_type}\n                                   exec={adapter.exec}\n                                   enabled={adapter.enabled}\n                                   updata={false}\n                                   schema={adapter.schema}\n                                   isUpdate={adapter.isUpdate}\n            />\n            list.push(addon)\n        }\n        return list\n    }\n\n    function renderAvailableAddonsList(addonsList) {\n\n        let addonList = []\n        for (const [id, entry] of addonsList) {\n            const addon =\n                <Addon key={id}\n                       id={id}\n                       name={entry.name}\n                       author={entry.author}\n                       description={entry.description}\n                       homepage_url={entry.homepage_url}\n                       license_url={entry.license_url}\n                       version={entry.version}\n                       primary_type={entry.primary_type}\n                       checksum={entry.checksum}\n                       url={entry.url}\n                       onAdd={installAddon}/>\n            addonList.push(addon)\n        }\n        return addonList\n    }\n\n\n    useEffect(() => {\n        fetchInstalledAddonsList()\n        fetchAvailableAddonList()\n    }, [])\n\n\n    const [isDiscover, setDiscover] = useState(false);\n\n    return (\n        <>\n            <section id=\"addon-settings\" className=\"settings-section\">\n\n                <section id=\"addon-main-settings\"\n                         className={isDiscover ? \"settings-subsection hidden\" : \"settings-subsection\"}>\n                    <button id=\"discover-addons-button\" onClick={() => setDiscover(true)}\n                            className=\"icon-button right-top-button\"/>\n                    <Link to=\"/settings\">\n                        <button id=\"back-button\" className=\"icon-button\"/>\n                    </Link>\n                    <ul id=\"installed-addons-list\">\n                        {\n                            installedAddons && renderInstalledAddonsList(installedAddons)\n                        }\n                    </ul>\n                </section>\n\n                {/*<section id=\"addon-config-settings\" className=\"hidden settings-subsection\"/>*/}\n\n\n                <section id=\"addon-discovery-settings\"\n                         className={isDiscover ? \"settings-subsection\" : \"settings-subsection hidden\"}>\n\n                    <button onClick={() => setDiscover(false)} id=\"back-button\" className=\"icon-button\"/>\n\n                    <div id=\"addon-discovery-container\" className=''>\n                        <input id=\"discovered-addons-search\" className=\"hidden\"/>\n                        <ul id=\"discovered-addons-list\">\n                            {availableAddons && renderAvailableAddonsList(availableAddons)};\n                        </ul>\n                    </div>\n                </section>\n\n            </section>\n        </>\n    );\n}\n\n\nexport default Addons;\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\use-things.js",["198"],"import React from \"react\";\n\n\nexport default function thingsReducer(state, action) {\n    console.log(\"action:\", action)\n    switch (action.messageType) {\n        case \"propertyStatus\":\n\n            return state\n        case \"addThing\":\n            console.log(\"thingsReducer addThing:\", action)\n            console.log(\"state\", state)\n            let newThing = action.thing\n            for (let thing of state) {\n                if (thing.id === newThing.id) {\n                    return state\n                }\n            }\n            let copyThings = state\n            copyThings.push(newThing)\n            console.log(\"newThings:\", copyThings)\n            return [...copyThings]\n        default:\n            return state\n    }\n}\n\n\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\thing.js",["199","200"],"import React, {useCallback, useContext} from \"react\";\nimport Light from \"./capability/light\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport {ThingContext} from \"../views/home\"\n\n\nexport default function Thing(props) {\n\n    const {handleSendMessage} = useContext(ThingContext)\n\n    const setPropertyValue = useCallback((property) => {\n            console.log(\"set property\", property)\n            const data = {}\n            console.log(data)\n            let message = {}\n            message.messageType = \"setProperty\"\n            message.id = props.thing.id\n            message.data = {}\n            message.data[property.name] = property.value\n            console.log(\"set property message:\",message)\n            handleSendMessage(message)\n        }, []\n    )\n\n    const propertyValueChanged = (thingId, value) => {\n\n    }\n\n\n    function RenderThing() {\n        const data = props.thing\n        let thing\n        if (data.hasOwnProperty(\"selectedCapability\")) {\n            let selectedCapability = data[\"selectedCapability\"]\n            if (selectedCapability === \"Light\") {\n                thing = <Light key={data.id} thing={data}/>\n            }\n        }\n        return thing\n    }\n\n    return <><ThingContext.Provider value={{setPropertyValue}}>\n        <Grid item xs={6} sm={3} id=\"thing-card\">\n            <Card elevation={5} >\n                {RenderThing()}\n            </Card>\n        </Grid>\n    </ThingContext.Provider>\n    </>\n\n}\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\new-thing.jsx",["201"],"import React, {useRef, useState} from \"react\";\nimport {useTranslation} from 'react-i18next'\nimport \"../css/things.css\"\nimport Utils from \"../util\"\nimport Card from '@material-ui/core/Card';\nimport {Button} from \"@material-ui/core\";\n\nexport default function NewThing(props) {\n\n\n    let {t, i18n} = useTranslation()\n\n    const fileInput = useRef()\n    const [iconFile, setIconFile] = useState()\n\n    const [selectedCapability, setSelectedCapability] = useState(props.type[0])\n\n    const [title, setTitle] = useState(props.title)\n\n    function typeOption(typeList) {\n        let options = []\n        for (let i of typeList) {\n            const option = <option value={i} key={i} selected={options.length === 0}>\n                {t(i)}\n            </option>\n            options.push(option)\n        }\n        return options\n    }\n\n    let {onSave} = props\n\n\n    return <Card variant=\"outlined\" className={\"new-thing \" + Utils.getClassFromCapability(selectedCapability)}>\n        <div className=\"new-thing-icon\"/>\n        <div className=\" new-thing-metadata\">\n            <input type=\" text\" name=\"thing-title\" readOnly={false} onChange={(e) => setTitle(e.target.value)}\n                   className=\" new-thing-title\" value={props.title}/>\n\n            <span className=\" new-thing-spacer\"/>\n\n            <select className=\" new-thing-type\" onChange={(e) => {\n                setSelectedCapability(e.target.value)\n            }}>\n                {typeOption(Utils.sortCapabilities(props.type).concat(\"Custom\"))}\n            </select>\n\n            <span className=\" new-thing-spacer\"/>\n\n            {selectedCapability === \"Custom\" &&\n            <input type=\"file\" className=\"new-thing-custom-icon-input\" ref={fileInput}\n                   accept=\"image/jpeg,image/png,image/svg+xml\" onChange={(e) => {\n                setIconFile(e.target.value)\n            }}/>}\n\n            {selectedCapability === \"Custom\" && <label className=\" new-thing-custom-icon-label text-button\"\n                                                       onClick={() => fileInput.current.click()}>{t('chooseIcon')}</label>}\n            {selectedCapability === \"Custom\" && <span className=\" new-thing-label\">{iconFile}</span>}\n\n        </div>\n        <Button color=\"primary\" variant=\"contained\" onClick={() => {\n            onSave(props.id, {title: title, \"selectedCapability\": selectedCapability, iconFile: iconFile})\n        }}>  {t('Save')}\n        </Button>\n    </Card>\n\n}\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\adapter.tsx",["202"],"import React from \"react\";\nimport {Trans} from \"react-i18next\";\nimport \"../css/settings.css\";\n\ninterface adapterInfo {\n    name: string,\n    version: string,\n    description: string,\n    homepage_url: string,\n    author: string,\n    license: string,\n    enabled: boolean,\n    isUpdate: boolean,\n\n}\n\nconst Adapter: React.FC<adapterInfo> = props => {\n\n    return <li className=\"addon-item\">\n        <div className=\"addon-settings-header adapter\">\n            <span className=\"addon-settings-name\">{props.name}</span>\n            <span className=\"addon-settings-version\">{props.version}</span>\n            <span className=\"addon-settings-description\">{props.description}</span>\n            <span className=\"addon-settings-author\"><Trans>author</Trans>\n                <a href={props.homepage_url} target=\"_blank\" rel=\"noopener\">{props.author}</a>\n            </span>\n            <span className=\"addon-settings-license\"\n                  data-license-href={props.license}><Trans>license</Trans>\n           </span>\n        </div>\n        <div className=\"addon-settings-controls\">\n            <button className=\"text-button addon-settings-config\"><Trans>configure</Trans>\n            </button>\n            {props.isUpdate && <button\n                className=\"text-button addon-settings-update\"><Trans>update</Trans>\n            </button>}\n            <span className=\"addon-settings-spacer\"></span>\n            <button className=\"text-button addon-settings-remove\"\n            ><Trans>remove</Trans>\n            </button>\n            <button\n                className={props.enabled ? \"text-button addon-settings-disable\" : \"text-button addon-settings-enable\"}>\n                {props.enabled ? <Trans>disable</Trans> : <Trans>enable</Trans>}\n            </button>\n        </div>\n    </li>\n}\n\n\nexport default Adapter;\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\addon.tsx",["203"],"import React from \"react\";\nimport {Trans} from 'react-i18next';\nimport \"../css/settings.css\";\n\ninterface addonProps {\n    id: string,\n    name: string,\n    version: string,\n    description: string,\n    author: string,\n    license_url: string,\n    homepage_url: string,\n    primary_type: string,\n    checksum: string,\n    url: string,\n    onAdd: (addonId: string, addonUrl: string, addonChecksum: string) => {}\n}\n\n\nconst Addon: React.FC<addonProps> = props => {\n\n    // @ts-ignore\n    return (\n        <li className=\"discovered-addon-item\">\n            <div className=\"addon-settings-header adapter\">\n                <span className=\"addon-settings-name\">{props.name}</span>\n                <span className=\"addon-settings-version\">{props.version}</span>\n                <span className=\"addon-settings-description\">{props.description}</span>\n                <span className=\"addon-settings-author\">by\n                    <a href={props.homepage_url} target=\"_blank\" rel=\"noopener\">{props.author}</a>\n                </span>\n                <span id=\"addon-license-calendar\" className=\"addon-settings-license\"\n                      data-license-href={props.license_url}>(license)\n                </span>\n            </div>\n            <div className=\"addon-settings-controls\">\n                <button onClick={() => {\n                    props.onAdd(props.id, props.url, props.checksum)\n                }} id=\"addon-install-calendar\" className=\"text-button addon-discovery-settings-add\"\n                        data-l10n-id=\"addon-discovery-add\"><Trans>add</Trans>\n                </button>\n            </div>\n        </li>\n    )\n}\n\n\nexport default Addon;\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\api\\index.js",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\util.js",["204"],"const Utils = {\n\n\n    sortCapabilities: (capabilities) => {\n        // copy the array, as we're going to sort in place.\n        const list = capabilities.slice();\n\n        const priority = [\n            'Lock',\n            'Thermostat',\n            'VideoCamera',\n            'Camera',\n            'SmartPlug',\n            'Light',\n            'MultiLevelSwitch',\n            'OnOffSwitch',\n            'ColorControl',\n            'ColorSensor',\n            'EnergyMonitor',\n            'DoorSensor',\n            'MotionSensor',\n            'LeakSensor',\n            'SmokeSensor',\n            'PushButton',\n            'TemperatureSensor',\n            'HumiditySensor',\n            'MultiLevelSensor',\n            'Alarm',\n            'BinarySensor',\n            'BarometricPressureSensor',\n            'AirQualitySensor',\n        ];\n\n        list.sort((a, b) => {\n            if (!priority.includes(a) && !priority.includes(b)) {\n                return 0;\n            } else if (!priority.includes(a)) {\n                return 1;\n            } else if (!priority.includes(b)) {\n                return -1;\n            }\n\n            return priority.indexOf(a) - priority.indexOf(b);\n        });\n\n        return list;\n    },\n\n    getClassFromCapability: (capability) => {\n        switch (capability) {\n\n            case 'Custom':\n                return 'custom-thing';\n            case 'OnOffSwitch':\n                return 'on-off-switch';\n            case 'MultiLevelSwitch':\n                return 'multi-level-switch';\n            case 'ColorControl':\n                return 'color-control';\n            case 'ColorSensor':\n                return 'color-sensor';\n            case 'EnergyMonitor':\n                return 'energy-monitor';\n            case 'BinarySensor':\n                return 'binary-sensor';\n            case 'MultiLevelSensor':\n                return 'multi-level-sensor';\n            case 'SmartPlug':\n                return 'smart-plug';\n            case 'Light':\n                return 'light';\n            case 'DoorSensor':\n                return 'door-sensor';\n            case 'MotionSensor':\n                return 'motion-sensor';\n            case 'LeakSensor':\n                return 'leak-sensor';\n            case 'SmokeSensor':\n                return 'smoke-sensor';\n            case 'PushButton':\n                return 'push-button';\n            case 'VideoCamera':\n                return 'video-camera';\n            case 'Camera':\n                return 'camera';\n            case 'TemperatureSensor':\n                return 'temperature-sensor';\n            case 'HumiditySensor':\n                return 'humidity-sensor';\n            case 'Alarm':\n                return 'alarm';\n            case 'Thermostat':\n                return 'thermostat';\n            case 'Lock':\n                return 'lock';\n            case 'BarometricPressureSensor':\n                return 'barometric-pressure-sensor';\n            case 'AirQualitySensor':\n                return 'air-quality-sensor';\n        }\n\n        return '';\n    }\n\n}\n\n\n\n\nmodule.exports = Utils\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\capability\\light.js",["205"],"import React from \"react\";\nimport OnOffProperty from \"../property/on-off\"\nimport BrightnessProperty from \"../property/brightness\"\nimport {SvgIcon} from \"@material-ui/core\";\nimport {green, yellow} from \"@material-ui/core/colors\";\n\nconst Light = (props) => {\n\n\n    function renderProperty() {\n        const list = []\n        for (const prop in props.thing.properties) {\n            if (props.thing.properties.hasOwnProperty(prop)) {\n                const p = props.thing.properties[prop]\n                if (p.hasOwnProperty(\"@type\")) {\n                    let type = p[\"@type\"]\n                    if (type === \"OnOffProperty\") {\n                        const propComponent =\n                            <OnOffProperty data={p} key={p.name} >\n                            </OnOffProperty>\n\n                        list.push(propComponent)\n                    }\n                    if (type === \"BrightnessProperty\") {\n                        const propComponent =\n                            <BrightnessProperty data={p} key={p.name} >\n                            </BrightnessProperty>\n\n                        list.push(propComponent)\n                    }\n                }\n            }\n        }\n        return list\n    }\n\n    return (\n        <>\n            <h1>{props.thing.title}</h1>\n            {props.thing.properties.on.value && <LightOnIcon/>}\n            {!props.thing.properties.on.value && <LightOffIcon/>}\n            {renderProperty()}\n        </>\n    )\n\n}\n\n\nexport default Light\n\n\nfunction LightOnIcon(props) {\n    return (\n        <SvgIcon style={{fontSize: 40}} {...props}>\n            <path fill=\"currentColor\"\n                  d=\"M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z\"/>\n        </SvgIcon>\n    );\n}\n\nfunction LightOffIcon(props) {\n    return (\n        <SvgIcon style={{fontSize: 40, color: yellow[900]}} {...props}>\n            <path fill=\"currentColor\"\n                  d=\"M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z\"/>\n        </SvgIcon>\n    );\n}\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\property\\on-off.js",["206","207"],"import React, {useContext} from \"react\";\nimport Switch from '@material-ui/core/Switch';\nimport {ThingContext} from \"../../views/home\";\n\nconst OnOffProperty = (props) => {\n\n    const {name, value} = props\n\n    const {setPropertyValue} = useContext(ThingContext)\n\n    const [state, setState] = React.useState(props.data);\n\n    const handleChange = (event) => {\n        setState({...state, value: !event.target.checked})\n        setPropertyValue(state)\n    };\n\n\n    return (\n        <>\n            <div id={\"property-item\"} className={\"property-on-off-switch\"}>\n                <Switch\n                    checked={!state.value}\n                    onChange={handleChange}\n                    color=\"primary\"\n                    name=\"on-off-switch\"\n                    inputProps={{'aria-label': 'primary checkbox'}}\n                />\n            </div>\n        </>\n    )\n}\n\nexport default OnOffProperty\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway-app\\src\\components\\property\\brightness.js",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\index.tsx",[],["208","209"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\reportWebVitals.ts",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\i18n.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\App.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\thing-add.js",["210","211","212","213","214"],"import React, {useEffect, useRef, useState} from \"react\";\nimport \"../css/things.css\";\nimport API from \"../api\";\nimport NewThing from \"../components/new-thing\";\nimport {Link} from \"react-router-dom\";\nimport Container from '@material-ui/core/Container';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useWebSocket, {ReadyState} from \"react-use-websocket\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    paper: {\n        padding: theme.spacing(2),\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n    },\n}));\n\n\nexport default function ThingsAdd() {\n\n    const classes = useStyles();\n\n    const [availableThings, setAvailableThings] = useState([])\n\n    const [socketUrl, setSocketUrl] = useState(\"ws://localhost:9090/new_things\")\n    const didUnmount = useRef(false);\n    const {\n        sendMessage,\n        lastMessage,\n        readyState,\n    } = useWebSocket(socketUrl,\n        {\n            shouldReconnect: (closeEvent) => {\n                /*\n                  useWebSocket will handle unmounting for you, but this is an example of a\n                  case in which you would not want it to automatically reconnect\n                */\n                return didUnmount.current === false;\n            },\n            reconnectAttempts: 10,\n            reconnectInterval: 3000,\n        }\n    );\n\n    const connectionStatus = {\n        [ReadyState.CONNECTING]: 'Connecting',\n        [ReadyState.OPEN]: 'Open',\n        [ReadyState.CLOSING]: 'Closing',\n        [ReadyState.CLOSED]: 'Closed',\n        [ReadyState.UNINSTANTIATED]: 'Uninstantiated',\n    }[readyState];\n\n\n    useEffect(() => {\n            let proto = 'ws:';\n            if (window.location.protocol === 'https:') {\n                proto = 'wss:';\n            }\n            let host = window.location.host\n            setSocketUrl(`ws://localhost:9090/new_things`);\n            requestPairing()\n            return () => {\n                cancelPairing()\n            }\n        }, []\n    )\n\n    useEffect(() => {\n            if (lastMessage != null) {\n                try {\n                    if (lastMessage.data) {\n                        setAvailableThings([...availableThings])\n                        const newThing = JSON.parse(lastMessage.data)\n                        console.log(\"new thing:\", newThing)\n                        if (newThing.hasOwnProperty(\"id\")) {\n                            for (let t of availableThings) {\n                                if (t.id === newThing.id) {\n                                    return\n                                }\n                            }\n\n                            let newList = []\n                            newList = availableThings\n                            newList.push(newThing)\n                            setAvailableThings([...newList])\n                            console.log(\"newList:\", newList)\n                            console.log(\"availableThings:\", availableThings)\n                        }\n                    }\n                } catch (e) {\n                    console.log(e)\n                }\n            }\n        }, [lastMessage]\n    )\n\n\n    function requestPairing() {\n        API.startPairing(5000).then((json) => {\n            console.log(\"action:\", json)\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n    function cancelPairing() {\n\n        didUnmount.current = true;\n        API.cancelPairing().then((json) => {\n            console.log(\"action:\", json)\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n    function addThingRequest(thing) {\n        console.log(\"addThingRequestaddThingRequestaddThingRequestaddThingRequestaddThingRequest\")\n        try {\n            if(thing){\n                API.addThing(thing).catch(e =>{\n                    console.log(e)\n                })\n            }\n        } catch (e) {\n            console.log(e)\n        }\n\n    }\n\n    function RenderAvailableThings() {\n        let list = []\n        for (let thing of availableThings) {\n            if (thing.hasOwnProperty(\"id\")) {\n                console.log(\"render thing\", thing)\n                const newThing = <NewThing key={thing.id}\n                                           thing={thing}\n                                           addNewThingRequest={addThingRequest}\n                />\n                list.push(newThing)\n            }\n        }\n        return list\n    }\n\n\n    return (\n        <>\n            <Link to=\"/things\">\n                <button id=\"back-button\" className=\"icon-button\"/>\n            </Link>\n            <div id=\"thing-add-view\" className={classes.root}>\n                <Container className=\"thing-add-view-container\" maxWidth=\"sm\">\n                    {RenderAvailableThings()}\n                </Container>\n            </div>\n        </>\n    )\n}\n\n\n\n",["215","216"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\rules.tsx",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\settings.tsx",["217"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\menu.tsx",["218"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\addons.jsx",["219","220","221"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\views\\home.jsx",["222","223","224","225","226"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\use-things.js",["227"],"import React from \"react\";\n\n\nexport default function thingsReducer(context, action) {\n    console.log(\"action:\", action)\n    switch (action.messageType) {\n        case \"propertyStatus\":\n\n            return context\n        case \"addThing\":\n            console.log(\"thingsReducer addThing:\", action)\n            console.log(\"state\", context)\n            let newThing = action.thing\n            for (let thing of context) {\n                if (thing.id === newThing.id) {\n                    return context\n                }\n            }\n            let newThings = context\n            newThings.push(newThing)\n            console.log(\"newThings:\", newThings)\n            return [...newThings]\n        default:\n            return context\n    }\n}\n\n\n\n","C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\thing.js",["228","229"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\new-thing.jsx",["230"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\addon.tsx",["231"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\adapter.tsx",["232"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\api\\index.js",[],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\util.js",["233"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\capability\\light.js",["234"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\property\\on-off.js",["235","236"],"C:\\Users\\刘桂林\\Documents\\web-things\\gateway\\gateway-app\\src\\components\\property\\brightness.js",[],{"ruleId":"237","replacedBy":"238"},{"ruleId":"239","replacedBy":"240"},{"ruleId":"241","severity":1,"message":"242","line":32,"column":12,"nodeType":"243","endLine":32,"endColumn":14,"suggestions":"244"},{"ruleId":"245","severity":1,"message":"246","line":39,"column":13,"nodeType":"247","messageId":"248","endLine":39,"endColumn":18},{"ruleId":"245","severity":1,"message":"249","line":41,"column":13,"nodeType":"247","messageId":"248","endLine":41,"endColumn":17},{"ruleId":"237","replacedBy":"238"},{"ruleId":"239","replacedBy":"240"},{"ruleId":"250","severity":1,"message":"251","line":2,"column":16,"nodeType":"247","messageId":"248","endLine":2,"endColumn":30},{"ruleId":"250","severity":1,"message":"252","line":44,"column":11,"nodeType":"247","messageId":"248","endLine":44,"endColumn":21},{"ruleId":"245","severity":1,"message":"253","line":11,"column":9,"nodeType":"247","messageId":"248","endLine":11,"endColumn":16},{"ruleId":"245","severity":1,"message":"254","line":31,"column":23,"nodeType":"247","messageId":"248","endLine":31,"endColumn":35},{"ruleId":"245","severity":1,"message":"255","line":53,"column":11,"nodeType":"247","messageId":"248","endLine":53,"endColumn":27},{"ruleId":"241","severity":1,"message":"256","line":63,"column":9,"nodeType":"243","endLine":63,"endColumn":11,"suggestions":"257"},{"ruleId":"245","severity":1,"message":"258","line":45,"column":12,"nodeType":"247","messageId":"248","endLine":45,"endColumn":29},{"ruleId":"245","severity":1,"message":"259","line":45,"column":31,"nodeType":"247","messageId":"248","endLine":45,"endColumn":50},{"ruleId":"241","severity":1,"message":"260","line":187,"column":8,"nodeType":"243","endLine":187,"endColumn":10,"suggestions":"261"},{"ruleId":"245","severity":1,"message":"262","line":1,"column":8,"nodeType":"247","messageId":"248","endLine":1,"endColumn":13},{"ruleId":"241","severity":1,"message":"263","line":23,"column":12,"nodeType":"243","endLine":23,"endColumn":14,"suggestions":"264"},{"ruleId":"245","severity":1,"message":"265","line":26,"column":11,"nodeType":"247","messageId":"248","endLine":26,"endColumn":31},{"ruleId":"245","severity":1,"message":"266","line":11,"column":13,"nodeType":"247","messageId":"248","endLine":11,"endColumn":17},{"ruleId":"267","severity":1,"message":"268","line":25,"column":46,"nodeType":"269","endLine":25,"endColumn":61},{"ruleId":"267","severity":1,"message":"268","line":30,"column":50,"nodeType":"269","endLine":30,"endColumn":65},{"ruleId":"270","severity":1,"message":"271","line":50,"column":9,"nodeType":"272","messageId":"273","endLine":100,"endColumn":10},{"ruleId":"245","severity":1,"message":"274","line":5,"column":9,"nodeType":"247","messageId":"248","endLine":5,"endColumn":14},{"ruleId":"245","severity":1,"message":"275","line":7,"column":12,"nodeType":"247","messageId":"248","endLine":7,"endColumn":16},{"ruleId":"245","severity":1,"message":"276","line":7,"column":18,"nodeType":"247","messageId":"248","endLine":7,"endColumn":23},{"ruleId":"237","replacedBy":"277"},{"ruleId":"239","replacedBy":"278"},{"ruleId":"245","severity":1,"message":"279","line":32,"column":9,"nodeType":"247","messageId":"248","endLine":32,"endColumn":20},{"ruleId":"245","severity":1,"message":"255","line":49,"column":11,"nodeType":"247","messageId":"248","endLine":49,"endColumn":27},{"ruleId":"245","severity":1,"message":"246","line":61,"column":17,"nodeType":"247","messageId":"248","endLine":61,"endColumn":22},{"ruleId":"245","severity":1,"message":"249","line":63,"column":17,"nodeType":"247","messageId":"248","endLine":63,"endColumn":21},{"ruleId":"241","severity":1,"message":"280","line":98,"column":12,"nodeType":"243","endLine":98,"endColumn":25,"suggestions":"281"},{"ruleId":"237","replacedBy":"277"},{"ruleId":"239","replacedBy":"278"},{"ruleId":"250","severity":1,"message":"251","line":2,"column":16,"nodeType":"247","messageId":"248","endLine":2,"endColumn":30},{"ruleId":"250","severity":1,"message":"252","line":44,"column":11,"nodeType":"247","messageId":"248","endLine":44,"endColumn":21},{"ruleId":"245","severity":1,"message":"258","line":45,"column":12,"nodeType":"247","messageId":"248","endLine":45,"endColumn":29},{"ruleId":"245","severity":1,"message":"259","line":45,"column":31,"nodeType":"247","messageId":"248","endLine":45,"endColumn":50},{"ruleId":"241","severity":1,"message":"260","line":187,"column":8,"nodeType":"243","endLine":187,"endColumn":10,"suggestions":"282"},{"ruleId":"245","severity":1,"message":"253","line":11,"column":9,"nodeType":"247","messageId":"248","endLine":11,"endColumn":16},{"ruleId":"245","severity":1,"message":"254","line":31,"column":23,"nodeType":"247","messageId":"248","endLine":31,"endColumn":35},{"ruleId":"245","severity":1,"message":"255","line":54,"column":11,"nodeType":"247","messageId":"248","endLine":54,"endColumn":27},{"ruleId":"241","severity":1,"message":"256","line":64,"column":9,"nodeType":"243","endLine":64,"endColumn":11,"suggestions":"283"},{"ruleId":"241","severity":1,"message":"284","line":85,"column":12,"nodeType":"243","endLine":85,"endColumn":14,"suggestions":"285"},{"ruleId":"245","severity":1,"message":"262","line":1,"column":8,"nodeType":"247","messageId":"248","endLine":1,"endColumn":13},{"ruleId":"241","severity":1,"message":"263","line":23,"column":12,"nodeType":"243","endLine":23,"endColumn":14,"suggestions":"286"},{"ruleId":"245","severity":1,"message":"265","line":26,"column":11,"nodeType":"247","messageId":"248","endLine":26,"endColumn":31},{"ruleId":"245","severity":1,"message":"266","line":11,"column":13,"nodeType":"247","messageId":"248","endLine":11,"endColumn":17},{"ruleId":"267","severity":1,"message":"268","line":30,"column":50,"nodeType":"269","endLine":30,"endColumn":65},{"ruleId":"267","severity":1,"message":"268","line":25,"column":46,"nodeType":"269","endLine":25,"endColumn":61},{"ruleId":"270","severity":1,"message":"271","line":50,"column":9,"nodeType":"272","messageId":"273","endLine":100,"endColumn":10},{"ruleId":"245","severity":1,"message":"274","line":5,"column":9,"nodeType":"247","messageId":"248","endLine":5,"endColumn":14},{"ruleId":"245","severity":1,"message":"275","line":7,"column":12,"nodeType":"247","messageId":"248","endLine":7,"endColumn":16},{"ruleId":"245","severity":1,"message":"276","line":7,"column":18,"nodeType":"247","messageId":"248","endLine":7,"endColumn":23},"no-native-reassign",["287"],"no-negated-in-lhs",["288"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'requestPairing'. Either include it or remove the dependency array.","ArrayExpression",["289"],"no-unused-vars","'proto' is assigned a value but never used.","Identifier","unusedVar","'host' is assigned a value but never used.","@typescript-eslint/no-unused-vars","'useTranslation' is defined but never used.","'MenuHidden' is assigned a value but never used.","'spacing' is defined but never used.","'setSocketUrl' is assigned a value but never used.","'connectionStatus' is assigned a value but never used.","React Hook useCallback has a missing dependency: 'sendMessage'. Either include it or remove the dependency array.",["290"],"'currentAddonsList' is assigned a value but never used.","'setCurrentAddonList' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'fetchAvailableAddonList'. Either include it or remove the dependency array.",["291"],"'React' is defined but never used.","React Hook useCallback has missing dependencies: 'handleSendMessage' and 'props.thing.id'. Either include them or remove the dependency array.",["292"],"'propertyValueChanged' is assigned a value but never used.","'i18n' is assigned a value but never used.","react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'green' is defined but never used.","'name' is assigned a value but never used.","'value' is assigned a value but never used.",["287"],["288"],"'sendMessage' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'availableThings'. Either include it or remove the dependency array. You can also do a functional update 'setAvailableThings(a => ...)' if you only need 'availableThings' in the 'setAvailableThings' call.",["293"],["294"],["295"],"React Hook useEffect has a missing dependency: 'thingsContext'. Either include it or remove the dependency array.",["296"],["297"],"no-global-assign","no-unsafe-negation",{"desc":"298","fix":"299"},{"desc":"300","fix":"301"},{"desc":"302","fix":"303"},{"desc":"304","fix":"305"},{"desc":"306","fix":"307"},{"desc":"302","fix":"308"},{"desc":"300","fix":"309"},{"desc":"310","fix":"311"},{"desc":"304","fix":"312"},"Update the dependencies array to be: [requestPairing]",{"range":"313","text":"314"},"Update the dependencies array to be: [sendMessage]",{"range":"315","text":"316"},"Update the dependencies array to be: [fetchAvailableAddonList]",{"range":"317","text":"318"},"Update the dependencies array to be: [handleSendMessage, props.thing.id]",{"range":"319","text":"320"},"Update the dependencies array to be: [availableThings, lastMessage]",{"range":"321","text":"322"},{"range":"323","text":"318"},{"range":"324","text":"316"},"Update the dependencies array to be: [thingsContext]",{"range":"325","text":"326"},{"range":"327","text":"320"},[759,761],"[requestPairing]",[1942,1944],"[sendMessage]",[6784,6786],"[fetchAvailableAddonList]",[799,801],"[handleSendMessage, props.thing.id]",[3144,3157],"[availableThings, lastMessage]",[6784,6786],[1947,1949],[2550,2552],"[thingsContext]",[799,801]]